# 5.2 함수 고급
- 자바스크립트는 '함수도 하나의 자료'라는 개념을 가지고 있어서 중간에 만들 수 있음. 
- 이는 2010년 전후로 등장한 비동기 프로그래밍을 이끔. 람다 또는 익명 함수라는 이름으로 기본 문법에 포함.

## 콜백 함수
- 자바스크립트는 함수도 하나의 자료형이므로 매개변수로 전달 가능. 매개변수로 전달하는 함수를 콜백(callback) 함수라 함
```js
function callThreeTimes(callback) {
    for (let i = 0; i < 3; i++) {
        callback(i);
    }
}

function print(i) {
    console.log(`${i}번째 함수 호출`)
}

callThreeTimes(print)
```
```text0번째 함수 호출
1번째 함수 호출
2번째 함수 호출
```
- callThreeTime() 함수는 함수를 매개변수로 받아 해당 함수를 3번 호출. 즉, 매개변수를 통해 함수를 받고, 그 함수를 통해 결과값을 호출함.
- 이를 익명 함수로 변경해보자.
```js
function callThreeTimes(callback) {
    for (let i = 0; i < 3; i++) {
        callback(i);
    }
}

callThreeTimes(function (i) {
    console.log(`${i}번째 함수 호출`)
})
```
```text
0번째 함수 호출
1번째 함수 호출
2번째 함수 호출
```
- 자바스크립트가 기본적으로 제공하는 함수 중에도 콜백 함수를 활용하는 함수가 많음. 어떠한 형태로 콜백 함수를 활용할까?

### 콜백 함수를 활용하는 함수 : forEach()
- 콜백 함수를 활용하는 가장 기본적인 함수는 forEach(). 배열이 갖고 있는 함수(매소드)로써 단순하게 배열 내부의 요소를 사용해서 콜백 함수를 호출해줌.
- 배열이 갖고 있는 메소드 중에서 콜백 함수를 활용하는 메소드는 다음과 같은 형태의 콜백 함수를 사용.
```js
function (value, index, array) { }
```
```js
const numbers = [273, 52, 103, 32, 57]

numbers.forEach(function (value, index, array) {
    console.log(`${index}번째 요소 : ${value}, 배열은 ${array}`)
});
```
```text
1번째 요소 : 52, 배열은 273,52,103,32,57
2번째 요소 : 103, 배열은 273,52,103,32,57
3번째 요소 : 32, 배열은 273,52,103,32,57
4번째 요소 : 57, 배열은 273,52,103,32,57
```

### 콜백 함수를 활용하는 함수 : map()
- map() 메소드도 배열이 갖고 있는 함수로 콜백 함수에서 리턴한 값들을 기반으로 새로운 배열을 만드는 함수.
```js
let numbers = [273, 52, 103, 32, 57]

numbers = numbers.map(function (value, index, array) {
    return value * value
});

numbers.forEach(console.log)
```
```text
74529 0 [ 74529, 2704, 10609, 1024, 3249 ]
2704 1 [ 74529, 2704, 10609, 1024, 3249 ]
10609 2 [ 74529, 2704, 10609, 1024, 3249 ]
1024 3 [ 74529, 2704, 10609, 1024, 3249 ]
3249 4 [ 74529, 2704, 10609, 1024, 3249 ]
```
- 배열의 모든 값을 제곱하여 다시 numbers에 담아주었고, forEach() 매개변수로 console.log 메소드 자체를 넘겨주어 출력하였음.
- 여기서 map 내에 익명함수의 매개변수를 value 하나만 써 주어도 됨. 사용하고자 하는 위치의 것만 순서에 맞춰 입력하면 됨.

### 콜백 함수를 활용하는 함수 : filter()
- filter() 메소드도 배열이 갖고 있는 함수로, 콜백 함수에서 리턴하는 값이 true인 것만 모아서 새로운 배열을 만드는 함수.
```js
const numbers = [0, 1, 2, 3, 4, 5];
const evenNumbers = numbers.filter(function (value) {
    return value % 2 === 0;
});

console.log(`원래 배열 ${numbers}`)
console.log(`짝수만 추출한 배열 ${evenNumbers}`)
```
```text
원래 배열 0,1,2,3,4,5
짝수만 추출한 배열 0,2,4
```

## 화살표 함수
- 앞에서 살펴본 map(), filter() 함수처럼 단순한 형태의 콜백 함수를 쉽게 입력하고자 화살표(arrow) 함수라는 함수 생성 방법 존재.
- function 대신 화살표(=>)를 사용하며, 다음과 같은 형태로 생성하는 간단한 함수
```js
(매개변수) => {

}
```
- 다음과 같이 간편하게도 사용 가능.
```js
(매개변수) => 리턴값
```
- 내부에서 this 키워드가 지칭하는 대상이 다르다는 등의 미세한 차이가 존재.
- 예를 들어 이전의 map() 함수의 콜백 함수로 화살표 함수를 넣는다면 다음과 같이 코드 작성.
```js
const array = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
console.log(array.map((value) => value * value));
```
```text
[
   0,  1,  4,  9, 16,
  25, 36, 49, 64, 81
]
```
- filter(), map(), forEach() 메소드를 화살표 함수와 함께 연속적으로 사용해보자.
```js
let numbers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
numbers
    .filter((value) => value % 2 === 0)
    .map((value) => value * value)
    .forEach((value) => {
        console.log(value);
    })
```
```text
0
4
16
36
64
```
